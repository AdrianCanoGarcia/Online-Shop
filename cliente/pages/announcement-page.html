<polymer-element name="announcement-page">
  <template>
    <style>
      :host{
      }
      #advert{
        margin: 6px;
        padding: 6px;
      }
      p{
        margin-bottom: 6px;
      }
      textarea{
        width: 400px;
        height: 220px;
        resize: none;
      }


    </style>
    <proposal-model id="proposal"></proposal-model>

    <core-card  id="core_card" layout vertical center fit>


      <div id="advert"><p>Introduce your advert:</p>
        <textarea id="textarea"></textarea>
        <p>Introduce your contact email:</p>
        <paper-input id="mail" placeholder="email@example.com"></paper-input>
      </div>
      <paper-button raised on-click="{{ toast }}">Publish Ad</paper-button>
      <paper-toast id="popup" text="A new announcement has been published"></paper-toast>
      <paper-toast id="popupError" text="Unable to publish your ad"></paper-toast>
    </core-card>

  </template>
  <script>

    Polymer({
      toast: function () {
        post = {
          content: this.$.textarea.value,
          mail: this.$.mail.value

        }
        that = this;
        this.$.proposal.publishPost(JSON.stringify(post), function (result) {
          if (result) {
            that.$.popup.show();
          } else {
            that.$.popupError.show();
          }
        });
      }
    });
  </script>
</polymer-element>
